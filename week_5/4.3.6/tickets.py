# tickets.py

from abc import ABC, abstractmethod


class ПроезднойБилет(ABC):
    def __init__(self, цена):
        self.цена = цена  # публичное поле
        self.__использовано_поездок = 0  # приватное поле (скрытое)
        self._ограничение_поездок = None  # защищенное поле

    @abstractmethod
    def списать_поездку(self):
        pass

    def показать_статус(self):
        print(f"Цена билета: {self.цена}")
        print(f"Использовано поездок: {self.__использовано_поездок}")
        print(f"Ограничение по поездкам: {self._ограничение_поездок}")

    def _увеличить_использование(self):
        # защищенный метод
        self.__использовано_поездок += 1
        print("Статус обновлен: поездка списана.")


class БилетСОграничением(ПроезднойБилет):
    def __init__(self, цена, ограничение_поездок):
        super().__init__(цена)
        self._ограничение_поездок = ограничение_поездок

    def списать_поездку(self):
        if self._ограничение_поездок is None:
            print("Нет ограничения по поездкам.")
            return
        if self._ограничение_поездок > self._get_used():
            self._увеличить_использование()
            print("Поездка успешно списана.")
        else:
            print("Достигнуто ограничение по поездкам.")

    def _get_used(self):
        return getattr(self, '_ПроезднойБилет__использовано_поездок', 0)


class БилетСОграничениемПоездок(БилетСОграничением):
    def __init__(self, цена, ограничение_поездок):
        super().__init__(цена, ограничение_поездок)

    def списать_поездку(self):
        if self._ограничение_поездок > self._get_used():
            self._увеличить_использование()
            print("Поездка успешно списана (Билет с ограничением по поездкам).")
        else:
            print("Достигнуто ограничение по поездкам.")


class БезлимитныйБилет(ПроезднойБилет):
    def __init__(self, цена):
        super().__init__(цена)

    def списать_поездку(self):
        # безлимитный билет не ограничен
        self._увеличить_использование()
        print("Поездка списана. Безлимитный билет.")